# This file configures Charmcraft.
# See https://juju.is/docs/sdk/charmcraft-config for guidance.

name: gocert-k8s
type: charm
title: GoCert
summary: charming certificate management made easy

description: |
  GoCert is an application that helps you manage certificate requests and their associated certificates.
  Charmed GoCert can help you automatically receive CSRs and distribute certificates to the applications
  you've deployed in your model.

provides:
  certificates:
    interface: tls-certificates

bases:
  - build-on:
    - name: ubuntu
      channel: "22.04"
    run-on:
    - name: ubuntu
      channel: "22.04"

containers:
  gocert:
    resource: gocert-image

resources:
  gocert-image:
    type: oci-image
    description: OCI image for the 'GoCert' application
    upstream-source: ghcr.io/canonical/gocert:0.0.2
  
parts:
  charm:
    build-packages:
      - libffi-dev
      - libssl-dev
      - rustc
      - cargo
      - pkg-config